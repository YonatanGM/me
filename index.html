<!DOCTYPE html>
<html lang="en">
<head>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">

  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1.0"/>
  <title>Yonatan Mamo</title>

  <style>
    /* RESET */
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    /* BODY => Warm organic background */
    body {
      font-family: "Helvetica Neue", sans-serif;
      background: linear-gradient(180deg, #faf8f5 0%, #f0ebe3 100%); /* Warm cream gradient */
      color: #2c2c2c; /* Dark gray for text */
      overflow-x: hidden;
    }
    
    html {
      scroll-behavior: smooth; /* Smooth scrolling */
    }

    /************************************************************
     * A) PAGE WRAPPER => limit width, center => white margins
     ************************************************************/
    .page-wrapper {
      max-width: 1200px;
      margin: 0 auto;
      position: relative;
    }

    /************************************************************
     * STICKY HERO (TRANSPARENT BLEND)
     ************************************************************/
    .hero-container {
      position: sticky;
      top: 0; left: 0; right: 0;
      background: rgba(250, 248, 245, 0.95); /* Warm semi-transparent */
      backdrop-filter: blur(20px); /* Stronger frosted glass effect */
      border-bottom: 1px solid rgba(218, 203, 184, 0.3); /* Warm subtle border */
      z-index: 2000;
      padding: 2rem;
      transition: padding 0.3s ease;
      color: #2c2c2c; /* Dark text */
      box-shadow: 0 2px 20px rgba(0, 0, 0, 0.03);
    }
    .hero-container.shrink {
      padding: 1rem;
    }

    /* Animated pop for hero title letters with mask effect */
    .hero-title {
      display: inline-block;
      font-size: clamp(2rem, 5vw, 3rem);
      font-weight: 300; /* Lighter, more refined */
      margin-bottom: 1rem;
      color: #2c2c2c; /* Solid dark text initially */
      position: relative;
      z-index: 1;
      transition: color 0.5s ease;
      letter-spacing: -0.02em;
    }

    .hero-title.mask {
      color: transparent; /* Make text transparent to reveal background */
      -webkit-text-stroke: 1.1px #2c2c2c; /* Optional: Outline for readability */
      mix-blend-mode: multiply; /* Blend mode to allow background visibility */
    }
    .hero-title .letter {
      display: inline-block;
      transform: scale(0.7);
      animation: popIn 0.5s ease forwards;
    }

    @media (max-width: 768px) { /* Target devices with a width of 768px or less */
      .hero-container.shrink {
        padding: 1.1rem; /* Smaller padding for mobile */
      }

      .hero-title {
        font-size: 1.8rem;
      }

      /* Prevent "About" Text from Animating on Mobile */
      .hero-container {
        transition: none !important; /* No transition on padding */
      }

      .hero-about {
        display: block !important;
        opacity: 1;
        transition: none !important;
        animation: none !important;
      }

      .hero-container.shrink .hero-about {
        display: none !important;
      }

      .hero-container.shrink .contact-row {
        display: none !important;
      }

      .hero-container.shrink {
        padding: 1.1rem;
      }
    }

    @keyframes popIn {
      to { transform: scale(1); }
    }

    .hero-container.shrink .hero-about,
    .hero-container.shrink .contact-row {
      display: none; /* Hide about/contact in shrink mode */
    }
    .hero-about {
      line-height: 1.7;
      font-size: 1.05rem;
      color: #6b6b6b; /* Softer gray */
      margin-bottom: 1.5rem;
      max-width: 700px;
      font-weight: 400;
    }
    .contact-row {
      display: flex;
      gap: 1rem;
      justify-content: left;
      margin-bottom: 1.5rem;
    }

    .contact-row a {
      color: #8b7355; /* Warm brown for icons */
      font-size: 24px;
      text-decoration: none;
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    }
    .contact-row a:hover {
      color: #c49a6c; /* Warm gold on hover */
      transform: translateY(-2px);
    }

    /* Nav pills with simplified hover effect */
    .nav-pills {
      display: flex;
      gap: 0.5rem;
    }
    .nav-pills a {
      position: relative;
      display: inline-block;
      padding: 0.5rem 1.2rem;
      border-radius: 20px;
      text-decoration: none;
      font-size: 0.85rem;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.05em;
      color: #2c2c2c;
      background: rgba(255, 255, 255, 0.6);
      backdrop-filter: blur(10px);
      border: 1.5px solid rgba(139, 115, 85, 0.2);
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    }
    .nav-pills a:hover {
      border-color: #8b7355;
      background: rgba(255, 255, 255, 0.9);
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(139, 115, 85, 0.15);
    }
    .nav-pills a.active {
      background: #8b7355;
      color: #ffffff;
      border-color: #8b7355;
    }

    /************************************************************
     * SECTION CARDS
     ************************************************************/
    .section-card {
      position: relative;
      margin-top: -40px;
      padding-top: 8rem;
      padding-bottom: 4rem;
      border-radius: 0 0 30px 30px;
      overflow: hidden;
      color: #2c2c2c;
      box-shadow: 0 8px 24px rgba(0,0,0,0.06);
      background-color: #ffffff;
      border: 1px solid rgba(218, 203, 184, 0.2);
    }

    /* Removed section titles as per user request */

    /* Masonry layout for organic feel */
    .multi-column {
      column-count: 4;
      column-gap: 1.2rem;
      padding: 1rem;
    }
    .col {
      /* Not used in masonry, but keeping for compatibility */
      flex: 1;
      min-width: 200px;
      display: flex;
      flex-direction: column;
      gap: 1rem;
    }
    
    /* Override for masonry items */
    .multi-column .rect-video {
      break-inside: avoid;
      margin-bottom: 1.2rem;
      display: block;
    }

    /* Responsive Masonry Columns */
    @media (max-width: 767px) {
      .multi-column {
        column-count: 1;
      }
    }
    @media (min-width: 768px) and (max-width: 1023px) {
      .multi-column {
        column-count: 2;
      }
    }
    @media (min-width: 1024px) and (max-width: 1400px) {
      .multi-column {
        column-count: 3;
      }
    }

    /* Enhanced Video Layout with hover indicator */
    .rect-video {
      width: 100%;
      cursor: pointer;
      transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
      border-radius: 12px;
      overflow: hidden;
      box-shadow: 0 4px 12px rgba(0,0,0,0.08);
      background: linear-gradient(135deg, #f5f1ed 0%, #e8dfd5 100%);
      position: relative;
      opacity: 0;
      animation: fadeInUp 0.6s ease forwards;
    }
    
    /* Staggered fade-in animation */
    .rect-video:nth-child(1) { animation-delay: 0.05s; }
    .rect-video:nth-child(2) { animation-delay: 0.1s; }
    .rect-video:nth-child(3) { animation-delay: 0.15s; }
    .rect-video:nth-child(4) { animation-delay: 0.2s; }
    .rect-video:nth-child(5) { animation-delay: 0.25s; }
    .rect-video:nth-child(6) { animation-delay: 0.3s; }
    .rect-video:nth-child(7) { animation-delay: 0.35s; }
    .rect-video:nth-child(8) { animation-delay: 0.4s; }
    
    @keyframes fadeInUp {
      from {
        opacity: 0;
        transform: translateY(20px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
    
    /* Play indicator overlay */
    .rect-video::after {
      content: '▶';
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      font-size: 3rem;
      color: rgba(255, 255, 255, 0.8);
      opacity: 0;
      transition: opacity 0.3s;
      pointer-events: none;
      z-index: 10;
      text-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
    }

    .rect-video:hover {
      transform: scale(1.02) translateY(-4px);
      box-shadow: 0 12px 28px rgba(139, 115, 85, 0.2);
      z-index: 10;
    }
    
    .rect-video:hover::after {
      opacity: 1;
    }

    /* Overlay Styling */
    .overlay {
      position: fixed;
      top: 0; left: 0; right: 0; bottom: 0;
      background-color: rgba(250, 248, 245, 0.98); /* Warm overlay */
      backdrop-filter: blur(10px);
      display: none;
      align-items: center;
      justify-content: center;
      z-index: 9999;
    }
    .overlay.active {
      display: flex;
    }
    .overlay-content {
      position: relative;
      background-color: #ffffff;
      padding: 1.5rem;
      display: flex;
      align-items: center;
      justify-content: center;
      max-width: 90%;
      max-height: 90%;
      overflow: hidden;
      border-radius: 20px;
      box-shadow: 0 20px 60px rgba(0,0,0,0.2);
      border: 1px solid rgba(218, 203, 184, 0.3);
    }
    .overlay-content video {
      display: block;
      max-width: 100%;
      max-height: 100%;
      object-fit: contain;
    }
    .close-btn {
      position: absolute;
      top: 1rem;
      right: 1rem;
      background-color: rgba(139, 115, 85, 0.9);
      color: #ffffff;
      border: none;
      font-size: 1.2rem;
      width: 36px;
      height: 36px;
      cursor: pointer;
      border-radius: 50%;
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 300;
    }
    .close-btn:hover {
      background-color: #8b7355;
      transform: rotate(90deg) scale(1.1);
    }
  </style>
</head>
<body>
  <!-- PAGE WRAPPER for white side margins -->
  <div class="page-wrapper">

    <!-- STICKY HERO -->
    <div class="hero-container" id="heroContainer">
      <div class="hero-content">
        <h1 class="hero-title" id="heroTitle"></h1>
        <div class="hero-about">
          Visual experiments exploring procedural systems, generative design, and computational aesthetics.
        </div>
        <div class="contact-row">
          <a href="mailto:girmayonatan86@gmail.com" aria-label="Email">
            <i class="fas fa-envelope"></i>
          </a>
          <a href="https://www.linkedin.com/in/yonatan-mamo-07b426137/" target="_blank" aria-label="LinkedIn">
            <i class="fab fa-linkedin"></i>
          </a>
          <a href="https://www.instagram.com/yonatan.gm/" target="_blank" aria-label="Instagram">
            <i class="fab fa-instagram"></i>
          </a>
          <a href="https://www.behance.net/yonatanmamo" target="_blank" aria-label="Behance">
            <i class="fab fa-behance"></i>
          </a>
        </div>

        <div class="nav-pills">
          <a href="#card3D" class="nav-link">Experiments</a>
          <a href="#cardTouch" class="nav-link">Motion</a>
          <a href="projects/spotify-uiux/index.html" target="_blank">Projects</a>
        </div>
      </div>
    </div>

    <!-- 3D CARD (Soft Neutral) -->
    <div class="section-card card-3d" id="card3D">
      <!-- Masonry layout -->
      <div class="multi-column" id="multiCol3D">
      </div>
    </div>

    <!-- TOUCH CARD (Soft Neutral) -->
    <div class="section-card card-touch" id="cardTouch">
      <!-- Masonry layout -->
      <div class="multi-column" id="multiColTouch">
      </div>
    </div>
  </div> <!-- end page-wrapper -->

  <!-- DESKTOP OVERLAY -->
  <div class="overlay" id="desktopOverlay">
    <div class="overlay-content">
      <button class="close-btn" id="closeBtn">X</button>
      <video id="overlayVideo" controls></video>
    </div>
  </div>

  <script>

    /*************************************************************
     * 1) ANIMATE HERO TITLE with “pop in” letters
     *************************************************************/
    const heroTitleEl = document.getElementById('heroTitle');
    const heroText = "HELLO, I'M YONATAN";

    function setHeroTitle(text) {
      heroTitleEl.innerHTML = "";
      let delay = 0;
      for (let i = 0; i < text.length; i++) {
        const char = text[i];
        const span = document.createElement('span');
        span.classList.add('letter');
        span.style.animationName = 'popIn';
        span.style.animationDelay = delay + 's';
        span.innerText = char === " " ? "\u00A0" : char; // Use non-breaking space for spaces
        heroTitleEl.appendChild(span);
        delay += 0.05;
      }
    }

    setHeroTitle(heroText);

    let heroContainer = document.getElementById('heroContainer');
    let heroWasShrunk = false;
    const observer = new MutationObserver(mutationList => {
      mutationList.forEach(mutation => {
        if (mutation.type === 'attributes' && mutation.attributeName === 'class') {
          const hasShrink = heroContainer.classList.contains('shrink');
          if (heroWasShrunk && !hasShrink) {
            setHeroTitle(heroText);
          }
          heroWasShrunk = hasShrink;
        }
      });
    });
    observer.observe(heroContainer, { attributes: true });
  </script>

  <script>
    /*************************************************************
     * 2) HERO SHRINK ON SCROLL AND APPLY MASK EFFECT
     *************************************************************/
    window.addEventListener('scroll', () => {
      if (window.scrollY > 150) {
        heroContainer.classList.add('shrink');
        heroTitleEl.classList.add('mask'); // Add mask class to apply mask effect
      } else {
        heroContainer.classList.remove('shrink');
        heroTitleEl.classList.remove('mask'); // Remove mask class to revert to solid text
      }
    });
  </script>

  <script>
    /*************************************************************
     * 3) CREATE & LAZY-LOAD videos for 3D & Touch (MASONRY)
     *************************************************************/
    const threeDCount = 18;
    const touchCount = 18;
    const multiCol3D = document.getElementById('multiCol3D');
    const multiColTouch = document.getElementById('multiColTouch');

    // Hardcoded arrays with video file names (just the base names)
    const threeDVideos = [
      "video12.mp4", "video9.mp4",  "video13.mp4", "mov32.mp4", "video11.mp4", "mov30.mp4", "mov33.mp4", "mov22.mp4",
      "video0.mp4", /* "video1.mp4" */, "mov24.mp4",
      "video3.mp4", "video4.mp4", "video5.mp4",
      "video6.mp4", "video8.mp4", "video10.mp4",
      /*"video7.mp4"*/, "video14.mp4",
      "video15.mp4", "video16.mp4", "video17.mp4",
    ].reverse();

    const touchVideos = [
      "Movie99.mp4",
      "Movie10.mp4",
      "Movie11.mp4",
      "Movie18.mp4",
      "Movie21.mp4",
      "Movie27.mp4",
      "Movie31.mp4",
      // "Movie40.mp4",
      "Movie41.mp4",
      "Movie56.mp4",
      "Movie62.mp4",
      "Movie9.mp4",
      "Movie42.mp4"
    ];

    // Fill 3D videos (directly in masonry container)
    threeDVideos.forEach((video, index) => {
      const vid = document.createElement('video');
      vid.className = 'rect-video';
      vid.dataset.src = `assets/${video}`;
      vid.preload = 'auto';
      vid.muted = true;
      vid.playsInline = true;
      vid.loading = 'lazy';
      multiCol3D.appendChild(vid);
    });

    // Fill Touch videos (directly in masonry container)
    touchVideos.forEach((video, index) => {
      const vid = document.createElement('video');
      vid.className = 'rect-video';
      vid.dataset.src = `assets/${video}`;
      vid.preload = 'auto';
      vid.muted = true;
      vid.playsInline = true;
      vid.loading = 'lazy';
      multiColTouch.appendChild(vid);
    });

    const allVids = document.querySelectorAll('.rect-video');
  </script>

  <script>
    /*************************************************************
     * 4) LAZY LOADING => IntersectionObserver
     *************************************************************/
    const lazyObserver = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          const vid = entry.target;
          if (vid.dataset.src) {
            vid.src = vid.dataset.src;
            vid.load();
          }
          lazyObserver.unobserve(vid);
        }
      });
    });
    allVids.forEach(vid => lazyObserver.observe(vid));
  </script>

  <script>
    /*************************************************************
     * 5) SCROLL TILT => only on desktop
     *************************************************************/
    function enableTiltForNonDesktop() {
      if (window.innerWidth > 1024) { // Only enable on desktop
        window.addEventListener('scroll', tiltHandler);
      }
    }
    function tiltHandler() {
      allVids.forEach(video => {
        const rect = video.getBoundingClientRect();
        const distance = window.innerHeight - rect.bottom;
        const maxDistance = 300.0;
        let angle = (distance / maxDistance) * 8; // Reduced from 10 to 8
        angle = Math.max(0, Math.min(200, angle));
        video.style.transform = `rotateY(${angle}deg)`;
      });
    }
    enableTiltForNonDesktop();
    window.addEventListener('resize', enableTiltForNonDesktop);
  </script>

  <script>
    /*************************************************************
     * 6) HOVER-TO-PLAY => Desktop
     *************************************************************/
    allVids.forEach(video => {
      video.addEventListener('mouseover', e => {
        e.currentTarget.muted = true;
        try { e.currentTarget.play(); }
        catch(err) { if (err.name !== "AbortError") console.log(err); }
      });
      video.addEventListener('mouseleave', e => {
        try { e.currentTarget.pause(); }
        catch(err) { if (err.name !== "AbortError") console.log(err); }
      });
    });
  </script>

  <script>
    /*************************************************************
     * 7) DESKTOP OVERLAY => click + MOBILE FULLSCREEN
     *************************************************************/
    const desktopOverlay = document.getElementById('desktopOverlay');
    const overlayVideo = document.getElementById('overlayVideo');
    const closeBtn = document.getElementById('closeBtn');

    function handleDesktopClick(e) {
      if (window.innerWidth >= 1024) {
        // Desktop: use overlay
        desktopOverlay.classList.add('active');
        overlayVideo.src = e.currentTarget.src;
        overlayVideo.play();
      } else {
        // Mobile: go fullscreen
        const vid = e.currentTarget;
        if (vid.requestFullscreen) {
          vid.requestFullscreen();
          vid.play();
        } else if (vid.webkitRequestFullscreen) {
          vid.webkitRequestFullscreen();
          vid.play();
        }
      }
    }
    allVids.forEach(video => {
      video.addEventListener('click', handleDesktopClick);
    });

    closeBtn.addEventListener('click', () => {
      desktopOverlay.classList.remove('active');
      overlayVideo.pause();
      overlayVideo.src = "";
    });
    
    // Close on escape key
    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape' && desktopOverlay.classList.contains('active')) {
        desktopOverlay.classList.remove('active');
        overlayVideo.pause();
        overlayVideo.src = "";
      }
    });
  </script>

  <script>
    /*************************************************************
     * 8) MOBILE PRESS-AND-HOLD => play
     *************************************************************/
    let mediaQuery = window.matchMedia('(max-width: 600px)');
    function handleMobileHold(mq) {
      allVids.forEach(video => {
        // Remove old
        video.removeEventListener('touchstart', onTouchStart);
        video.removeEventListener('touchmove', onTouchMove);
        video.removeEventListener('touchend', onTouchEnd);
        if (mq.matches) {
          video.addEventListener('touchstart', onTouchStart);
          video.addEventListener('touchmove', onTouchMove);
          video.addEventListener('touchend', onTouchEnd);
        }
      });
    }

    let timer = null;
    let startX = 0, startY = 0;
    const threshold = 10;
    const holdTime = 500;
    let isPlaying = false;

    function onTouchStart(e) {
      const touch = e.touches[0];
      startX = touch.clientX;
      startY = touch.clientY;
      isPlaying = false;

      const vid = e.currentTarget;
      timer = setTimeout(() => {
        try {
          vid.play();
          isPlaying = true;
        } catch(err) { if (err.name !== "AbortError") console.log(err); }
      }, holdTime);
    }

    function onTouchMove(e) {
      const touch = e.touches[0];
      const deltaX = Math.abs(touch.clientX - startX);
      const deltaY = Math.abs(touch.clientY - startY);
      if (deltaX > threshold || deltaY > threshold) {
        clearTimeout(timer);
      }
    }

    function onTouchEnd(e) {
      clearTimeout(timer);
      const vid = e.currentTarget;
      if (isPlaying) {
        try { vid.pause(); }
        catch(err) { if (err.name !== "AbortError") console.log(err); }
      }
      isPlaying = false;
    }

    handleMobileHold(mediaQuery);
    mediaQuery.addEventListener('change', handleMobileHold);
  </script>
  
  <script>
    /*************************************************************
     * 9) SCROLL SPY => Active navigation highlighting
     *************************************************************/
    const sections = document.querySelectorAll('.section-card');
    const navLinks = document.querySelectorAll('.nav-link');

    window.addEventListener('scroll', () => {
      let current = '';
      sections.forEach(section => {
        const sectionTop = section.offsetTop;
        const sectionHeight = section.clientHeight;
        if (window.scrollY >= (sectionTop - 300)) {
          current = section.getAttribute('id');
        }
      });
      
      navLinks.forEach(link => {
        link.classList.remove('active');
        if (link.getAttribute('href').includes(current)) {
          link.classList.add('active');
        }
      });
    });
  </script>
</body>
</html>
