<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1.0"/>
  <title>Yonatan Mamo - 4 Vertical Columns + Lazy Load</title>

  <style>
    /* RESET */
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    body {
      font-family: "Helvetica Neue", sans-serif;
      background-color: #fff;
      color: #000;
      overflow-x: hidden;
    }

    /************************************************************
     * STICKY HERO (Black, bottom-rounded corners)
     ************************************************************/
    .hero-container {
      position: sticky;
      top: 0; left: 0; right: 0;
      background-color: #000;
      color: #fff;
      border-radius: 0 0 20px 20px;
      z-index: 2000;
      padding: 2rem;
      transition: padding 0.5s ease;
      max-width: 1200px;
      margin: 0 auto;
    }
    .hero-container.shrink {
      padding: 1rem;
    }

    .hero-title {
      font-size: 2rem;
      font-weight: 700;
      margin-bottom: 1rem;
    }
    /* optional trailing dots animation */
    .animate-dots::after {
      content: "...";
      display: inline-block;
      animation: blinkDots 1.5s infinite steps(1, end);
      margin-left: 2px;
    }
    @keyframes blinkDots {
      0%, 20% { opacity: 1; }
      50% { opacity: 0; }
      100% { opacity: 1; }
    }

    /* Hide about/contact in shrink mode */
    .hero-container.shrink .hero-about,
    .hero-container.shrink .contact-row {
      display: none;
    }
    .hero-about {
      max-width: 600px;
      line-height: 1.5;
      font-size: 0.95rem;
      color: #ccc;
      margin-bottom: 1.5rem;
    }
    .contact-row {
      display: flex;
      flex-wrap: wrap;
      gap: 1rem;
      margin-bottom: 1.5rem;
    }
    .contact-row a {
      color: #fff;
      text-decoration: none;
      font-size: 0.9rem;
      font-weight: 500;
      display: flex;
      align-items: center;
      gap: 0.3rem;
    }
    .contact-icon {
      width: 16px;
      height: 16px;
      background-color: #888;
      border-radius: 50%;
    }

    /* Nav pills remain visible in both states */
    .nav-pills {
      display: flex;
      gap: 0.5rem;
    }
    .nav-pills a {
      display: inline-block;
      background-color: #222;
      color: #fff;
      padding: 0.5rem 1rem;
      border-radius: 999px;
      text-decoration: none;
      font-size: 0.9rem;
      font-weight: 500;
      transition: background-color 0.2s;
    }
    .nav-pills a:hover {
      background-color: #444;
    }

    /************************************************************
     * SECTIONS (3D, TouchDesigner)
     ************************************************************/
    section {
      max-width: 1200px;
      margin: 2rem auto;
      padding: 0 1rem;
    }
    section h2 {
      font-size: 1.4rem;
      font-weight: 600;
      margin-bottom: 1rem;
      text-align: center;
      color: #000;
    }

    /************************************************************
     * 4-FLEX-COLUMN LAYOUT => each column is a vertical stack
     * We'll do media queries for 1 col on phone, 2 on tablet, 4 on desktop
     ************************************************************/
    .multi-column {
      display: flex;
      width: 100%;
    }
    .col {
      display: flex;
      flex-direction: column;
      /* no vertical gap => videos stack with no space in between */
    }

    /* 1 column on phone (≤767px) */
    @media (max-width: 767px) {
      .multi-column {
        flex-wrap: wrap;
      }
      .col {
        width: 100%;
      }
    }
    /* 2 columns on tablet (768px-1023px) */
    @media (min-width: 768px) and (max-width: 1023px) {
      .col {
        width: 50%;
      }
    }
    /* 4 columns on desktop (≥1024px) */
    @media (min-width: 1024px) {
      .col {
        width: 25%;
      }
    }

    /************************************************************
     * Videos => standard rectangles
     ************************************************************/
    .rect-video {
      width: 100%;
      cursor: pointer;
      background-color: #222;
      transition: transform 0.3s;
    }
    /* On hover => scale only that video */
    .rect-video:hover {
      transform: scale(1.04);
    }

    /************************************************************
     * DESKTOP-ONLY OVERLAY
     ************************************************************/
    .overlay {
      position: fixed;
      top: 0; left: 0; right: 0; bottom: 0;
      background-color: rgba(0,0,0,0.8);
      display: none;
      align-items: center;
      justify-content: center;
      z-index: 9999;
    }
    .overlay.active {
      display: flex;
    }
    .overlay-content {
      position: relative;
      background-color: #000;
      padding: 1rem;
      display: flex;
      align-items: center;
      justify-content: center;
      max-width: 80%;
      max-height: 80%;
      overflow: hidden;
    }
    .overlay-content video {
      display: block;
      max-width: 100%;
      max-height: 100%;
      object-fit: contain;
    }
    .close-btn {
      position: absolute;
      top: 0.5rem;
      right: 0.5rem;
      background-color: #333;
      color: #fff;
      border: none;
      font-size: 1rem;
      padding: 0.3rem 0.6rem;
      cursor: pointer;
    }
  </style>
</head>

<body>
  <!-- STICKY HERO -->
  <div class="hero-container" id="heroContainer">
    <div class="hero-content">
      <h1 class="hero-title">
        Hello, I’m Yonatan<span class="animate-dots"></span>
      </h1>
      <div class="hero-about">
        I’m a 3D designer and UI/UX enthusiast. Below, you’ll see 3D & TouchDesigner
        videos arranged in 4 vertical stacks on desktop. Thumbnails appear on mobile
        via lazy loading, and tapping a video starts it immediately (no hold).
      </div>
      <div class="contact-row">
        <a href="mailto:girmayonatan86@gmail.com"><span class="contact-icon"></span>Email</a>
        <a href="https://www.linkedin.com/in/yonatan-mamo-07b426137/" target="_blank">
          <span class="contact-icon"></span>LinkedIn
        </a>
        <a href="https://www.instagram.com/yonatan.gm/" target="_blank">
          <span class="contact-icon"></span>Instagram
        </a>
      </div>
      <div class="nav-pills">
        <a href="#section-3d">3D</a>
        <a href="#section-touch">TouchDesigner</a>
        <a href="projects/spotify-uiux/index.html" target="_blank">UI/UX</a>
      </div>
    </div>
  </div>

  <!-- 3D SECTION -->
  <section id="section-3d">
    <h2>3D</h2>
    <div class="multi-column" id="multiCol3D">
      <div class="col"></div>
      <div class="col"></div>
      <div class="col"></div>
      <div class="col"></div>
    </div>
  </section>

  <!-- TOUCH SECTION -->
  <section id="section-touch">
    <h2>TouchDesigner</h2>
    <div class="multi-column" id="multiColTouch">
      <div class="col"></div>
      <div class="col"></div>
      <div class="col"></div>
      <div class="col"></div>
    </div>
  </section>

  <!-- DESKTOP OVERLAY -->
  <div class="overlay" id="desktopOverlay">
    <div class="overlay-content">
      <button class="close-btn" id="closeBtn">X</button>
      <video id="overlayVideo" controls></video>
    </div>
  </div>

  <script>
    /************************************************************
     * 1) HERO SHRINK
     ************************************************************/
    const heroContainer = document.getElementById('heroContainer');
    window.addEventListener('scroll', () => {
      if (window.scrollY > 150) {
        heroContainer.classList.add('shrink');
      } else {
        heroContainer.classList.remove('shrink');
      }
    });
  </script>

  <script>
    /************************************************************
     * 2) FILL THE 4 COLUMNS WITH 18 LAZY-LOADED VIDEOS FOR EACH
     ************************************************************/
    const threeDCount = 18;
    const touchCount = 18;
    const multiCol3D = document.getElementById('multiCol3D').children; // 4 .col
    const multiColTouch = document.getElementById('multiColTouch').children;

    // 3D
    for (let i = 0; i < threeDCount; i++) {
      const vid = document.createElement('video');
      vid.className = 'rect-video';
      // lazy load => store real src in data-src
      vid.dataset.src = `assets/video${i}.mp4`;
      vid.preload = 'auto';
      vid.muted = true;
      vid.playsInline = true;
      vid.loading = 'lazy';
      multiCol3D[i % 4].appendChild(vid);
    }

    // Touch
    for (let i = 0; i < touchCount; i++) {
      const vid = document.createElement('video');
      vid.className = 'rect-video';
      vid.dataset.src = `assets/touchVideo${i}.mp4`;
      vid.preload = 'auto';
      vid.muted = true;
      vid.playsInline = true;
      vid.loading = 'lazy';
      multiColTouch[i % 4].appendChild(vid);
    }

    const allVids = document.querySelectorAll('.rect-video');
  </script>

  <script>
    /************************************************************
     * 3) LAZY LOADING => IntersectionObserver
     ************************************************************/
    const lazyObserver = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          const vid = entry.target;
          if (vid.dataset.src) {
            vid.src = vid.dataset.src;
            vid.load();
          }
          lazyObserver.unobserve(vid);
        }
      });
    });
    allVids.forEach(vid => lazyObserver.observe(vid));
  </script>

  <script>
    /************************************************************
     * 4) SCROLL TILT ONLY FOR NON-DESKTOP
     ************************************************************/
    function enableTiltForNonDesktop() {
      if (window.innerWidth >= 1024) {
        // no tilt on desktop
        window.removeEventListener('scroll', tiltHandler);
        allVids.forEach(vid => { vid.style.transform = ''; });
      } else {
        // smaller => tilt
        window.addEventListener('scroll', tiltHandler);
      }
    }
    function tiltHandler() {
      allVids.forEach(video => {
        const rect = video.getBoundingClientRect();
        const distance = window.innerHeight - rect.bottom;
        const maxDistance = 300;
        let angle = (distance / maxDistance) * 20;
        angle = Math.max(0, Math.min(100, angle));
        video.style.transform = `rotateY(${angle}deg)`;
      });
    }
    enableTiltForNonDesktop();
    window.addEventListener('resize', enableTiltForNonDesktop);
  </script>

  <script>
    /************************************************************
     * 5) HOVER-TO-PLAY => On mouseover / mouseleave
     ************************************************************/
    allVids.forEach(video => {
      video.addEventListener('mouseover', e => {
        e.currentTarget.muted = true;
        try { e.currentTarget.play(); }
        catch(err) { if (err.name !== "AbortError") console.log(err); }
      });
      video.addEventListener('mouseleave', e => {
        try { e.currentTarget.pause(); }
        catch(err) { if (err.name !== "AbortError") console.log(err); }
      });
    });
  </script>

  <script>
    /************************************************************
     * 6) DESKTOP-ONLY OVERLAY
     ************************************************************/
    const desktopOverlay = document.getElementById('desktopOverlay');
    const overlayVideo = document.getElementById('overlayVideo');
    const closeBtn = document.getElementById('closeBtn');

    function handleDesktopClick(e) {
      if (window.innerWidth >= 1024) {
        desktopOverlay.classList.add('active');
        overlayVideo.src = e.currentTarget.src;
        overlayVideo.play();
      }
    }
    allVids.forEach(video => {
      video.addEventListener('click', handleDesktopClick);
    });

    closeBtn.addEventListener('click', () => {
      desktopOverlay.classList.remove('active');
      overlayVideo.pause();
      overlayVideo.src = "";
    });
  </script>

  <script>
    /************************************************************
     * 7) TOUCH EVENTS => immediate play on tap
     ************************************************************/
    let mediaQuery = window.matchMedia('(max-width: 600px)');
    function handleMobileTouch(mq) {
      allVids.forEach(video => {
        if (mq.matches) {
          // On mobile => immediate play on touchstart, pause on touchend
          video.addEventListener('touchstart', onTouchStart, {passive: false});
          video.addEventListener('touchend', onTouchEnd, {passive: false});
        } else {
          // remove if not matched
          video.removeEventListener('touchstart', onTouchStart);
          video.removeEventListener('touchend', onTouchEnd);
        }
      });
    }
    function onTouchStart(e) {
      e.preventDefault();
      const vid = e.currentTarget;
      try {
        vid.play();
      } catch(err) {
        if (err.name !== "AbortError") console.log(err);
      }
    }
    function onTouchEnd(e) {
      e.preventDefault();
      const vid = e.currentTarget;
      try {
        vid.pause();
      } catch(err) {
        if (err.name !== "AbortError") console.log(err);
      }
    }

    handleMobileTouch(mediaQuery);
    mediaQuery.addEventListener('change', handleMobileTouch);
  </script>
</body>
</html>
